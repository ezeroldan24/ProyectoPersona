<!DOCTYPE html>
<html lang="es-AR" xmlns:th="http://www.thymeleaf.org">

<head th:replace="/fragments/head :: head">
    <!--En fragments head, se encuentra todo el codigo de boostrap y css y se pasa aca con replace -->
<body>
    <nav th:replace="/fragments/nav-bar :: nav-bar-dark"> </nav>
    <div class="container">
    <div th:if="${error}" th:text="${error}" class="alert alert-danger"><!--El if verifica si hay un error, y el th text muestra el mensaje del error-->
    </div>
     <div th:if="${sucess}" th:text="${sucess}" class="alert alert-success"><!--El if verifica si hay un error, y el th text muestra el mensaje del error-->
    </div>
        <div class="card">
            <div class="card-header d-flex">
                <h1 class="card mt-2"> Lista de Usuarios</h1>
       
            </div>
            <div class="card-body">
       <!--      <form class="row g-3" th:action="@{/usuario/list}"method="GET" >
 
 <div class="col">
    
    <input type="text" style="width: 100%;" name="q" placeholder="Buscar..">
  </div>
  <div class="col-2">
    <button type="submit" class="btn btn-dark mb-3">Buscar</button>
  </div>
</form>-->

                <table class="table table-dark table-striped">
                    <thead>
                        <tr>
                             <th class="text-light bg-dark">N°</th>
                            <th class="text-light bg-dark">Nombre</th>
                            <th class="text-light bg-dark">Apellido</th>
                            <th class="text-light bg-dark">Edad</th>
                            <th class="text-light bg-dark">Ciudad</th>
                            <th class="text-light bg-dark">Usuario</th>
                             <th class="text-light bg-dark">Acciones</th>
                            
                        	
                          
                        
                    </thead>
                    <tbody>
                        <tr class="text-light bg-dark" th:each="p,iterator: ${usuarios}">
                            
                           <td class="text-light bg-dark" th:text="${iterator.index+1}"></td>
                                
                            <td class="text-light bg-dark" th:text="${p.nombre}"></td>
                            <td class="text-light bg-dark" th:text="${p.apellido}"></td>
                            <td class="text-light bg-dark" th:text="${p.edad}"></td>
                            <td class="text-light bg-dark" th:text="${p.ciudad} == null ? 'no tiene' : ${p.ciudad.nombre}"></td><!-- (OPERADOR TERNARIO)SI LA CIUDAD ES NULA 'NO TIENE CIUDAD' SINO SE LE CARGA LA CIUDAD A LA PERSONA-->
                   			
                   			<td class="text-light bg-dark" th:text="${p.username}"></td><!-- (OPERADOR TERNARIO)SI LA CIUDAD ES NULA 'NO TIENE CIUDAD' SINO SE LE CARGA LA CIUDAD A LA PERSONA-->
                   			<td>
                   			<button sec:authorize="hasRole('ROLE_ADMIN')" class="btn-dark"><a th:href="@{/persona/delete}+'?id='+${p.id}" class="px-5 py-2" >Eliminar</a></button>
                   			<button sec:authorize="hasRole('ROLE_ADMIN')" class="btn-dark"><a th:href="@{/persona/form}+'?id='+${p.id}" class="px-5 py-2">editar</a></button>
                   			</td>
                    </tbody>
                    <p class="text-light bg-dark d-inline " th:if="${usuarios.isEmpty}">No hay usuarios para mostrar</p>
                    <!--SI PERSONAS ESTA VACIO SE MUESTRA EL P -->
                </table>
            </div>
        </div>
        <button class="text-light bg-dark"><a th:href="@{/}">Volver a inicio</a></button>
    </div>





</body>

</html>